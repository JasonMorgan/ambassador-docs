# Release Notes Template
# This file is structured according with the document on https://www.notion.so/datawire/Release-Notes-Template-d652c045bb044f9ab963f8b4389d8e38
# it contains an object that has an items attribute which contain which is an arry of objects that contains the description for each version.

items:
  # Array of versions
  - version: 1.13.5 # Version of the release
    date: '2021-05-13' # Date of the release international Format
    notes: # Array of vrelease notes
      - title: Config Keys # title of the note
        # the content of the note
        body: Fix a regression from 1.8.0 that prevented Ambassador module config keys proper_case and preserve_external_request_id from working correctly.
        # An image that should have a size of 200 x 166 pixels
        image: ./dev-self-service.png
        # This can be a relative path or an absolute path to where the additional information can be found. Will be the target of `More Information` Button
        #docs: about/faq
        #Type of the issue. Possible values are bugfix, feature, security and change
        type: bugfix
      - title: Wrong IP on Ambassador Jubernetes regression.
        body: Fixed a regression in detecting the Ambassador Kubernetes service xthat could cause the wrong IP or hostname to be used in Ingress statuses.
        #docs: about/faq
        type: bugfix
  - version: 1.13.4
    date: '2021-05-11'
    notes:
      - title: Security Update
        body: Incorporate the Envoy 1.15.5 security update by adding the reject_requests_with_escaped_slashes option to the Ambassador module.
        #docs: about/faq
        type: security
  - version: 1.13.3
    date: '2021-05-03'
    notes:
      - title: Emissary Ingress and Ambassador Edge Stack
        body: Fixed a regression that caused Ambassador to crash when loading the Edge Policy Console when any RateLimit resources exist.
        #docs: about/faq
        type: bugfix
  - version: 1.13.2
    date: '2021-03-2021'
    notes:
      - title: Emissary Ingress and Ambassador Edge Stack
        body: Fixed a regression that caused endpoint routing to not work when defining mappings in service annotations.
        #docs: about/faq
        type: bugfix
  - version: 1.13.1
    date: '2021-03-22'
    notes:
      - title: CPU Usage corrections
        body: Potentially increased CPU Usage for deployments with large numbers of Hosts.
        #docs: about/faq
        type: bugfix
  - version: 1.13.0
    date: '2021-03-20'
    notes:
      - title: Support for Mapping AuthService setting
        body: Potentially increased CPU Usage for deployments with large numbers of Hosts.
        docs: topics/using/authservice
        type: feature
      - title: Support for reporting Argo Rollouts
        body: Added support in ambassador-agent for reporting Argo Rollouts and Argo Applications to Ambassador Cloud
        #docs: topics/using/authservice
        type: feature
      - title: Diagnostics non local for admin UI internally usage
        body: The Ambassador Module configuration now supports the diagnostics.allow_non_local flag to expose admin UI internally only.
        #docs: topics/using/authservice
        type: feature
      - title: Configuration for Envoy v3 API
        body: Ambassador will now use the Envoy v3 API internally when the AMBASSADOR_ENVOY_API_VERSION environment variable is set to "V3". By default, Ambassador will continue to use the v2 API.
        #docs: topics/using/authservice
        type: feature
      - title: Ambassador Agent for API Gateway
        body: The Ambassador Agent is now available (and deployed by default) for the API Gateway (https://app.getambassador.io).
        #docs: topics/using/authservice
        type: feature
      - title: Ambassador route Matching
        body: The Ambassador Module configuration now supports merge_slashes which tells Ambassador to merge adjacent slashes when performing route matching. For example, when true, a request with URL '//foo/' would match a Mapping with prefix '/foo/'.
        #docs: topics/using/authservice
        type: feature
      - title: Kubernetes Gateway API subset support
        body: Basic support for a subset of the Kubernetes Gateway API has been added.
        #docs: topics/using/authservice
        type: feature
      - title: Statistics tag on metrics for DogStatsD.
        body: Ambassador now supports the DD_ENTITY_ID environment variable to set the dd.internal.entity_id statistics tag on metrics generated when using DogStatsD.
        #docs: topics/using/authservice
        type: feature
      - title: Knative paths match on prefix
        body: Make Knative paths match on prefix instead of the entire path to better align to the Knative specification.
        #docs: topics/using/authservice
        type: bugfix
      - title: Enpoint routing resolver
        body: The endpoint routing resolver will now properly watch services that include a scheme.
        docs: topics/using/authservice
        type: bugfix
      - title: PyYAML
        body: Upgrade PyYAML to 5.4.1
        #docs: topics/using/authservice
        type: bugfix
      - title: Helm chart
        body: The Helm chart has been moved into this repo, in the charts/ambassador directory.
        #docs: topics/using/authservice
        type: change
      - title: Mapping CRD
        body: The Mapping CRD has been modified so that kubectl get mappings now has a column for not just the source path-prefix (.spec.prefix), but the source host (.spec.host) too.
        #docs: topics/using/authservice
        type: change
      - title: yaml/docs autogenerated
        body: The yaml in yaml/docs is now generated from the contents of the helm chart in the charts/ambassador directory.
        image: ./dev-self-service.png
        #docs: topics/using/authservice
        type: change
      - title: deprecated v2alpha protocol_version support
        body: Support for the deprecated v2alpha protocol_version has been removed from the AuthService and RateLimitService.
        #docs: topics/using/authservice
        type: change
